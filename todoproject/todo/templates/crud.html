{% extends 'index.html' %}
{% block content %}
<h2 class="mb-4">Your Todo List</h2>

<form method="POST" class="mb-4 d-flex gap-2">
  {% csrf_token %}
  <input type="text" name="new-todo" class="form-control" placeholder="Add new todo..." required>
  <button type="submit" class="btn btn-success">Add</button>
</form>

{% for todo in page_obj %}
  <div class="card mt-2 shadow-sm">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div>
        <strong {% if todo.is_completed %} style="text-decoration: line-through;" {% endif %}>
          {{ todo.name }}
        </strong><br>
        <small class="text-muted">Created: {{ todo.created_on|date:"M d, Y H:i" }}</small>
      </div>
      <div class="btn-group">
        {% if not todo.is_completed %}
          <a href="{% url 'complete_todo' todo.id %}" class="btn btn-sm btn-outline-primary">âœ” Done</a>
        {% endif %}
        <a href="{% url 'delete_todo' todo.id %}" class="btn btn-sm btn-outline-danger">ðŸ—‘ Delete</a>
      </div>
    </div>
  </div>
{% empty %}
  <p class="text-muted">No todo items found.</p>
{% endfor %}

<nav aria-label="Page navigation" class="mt-4">
  <ul class="pagination justify-content-center">
    {% if page_obj.has_previous %}
      <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">Previous</a></li>
    {% endif %}
    <li class="page-item active"><span class="page-link">{{ page_obj.number }}</span></li>
    {% if page_obj.has_next %}
      <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">Next</a></li>
    {% endif %}
  </ul>
</nav>
{% endblock %}